1998-02-26  Eckehard Berns  <eb@berns.prima.de>

	* gnome-stock.[ch]: made gnome-stock use gnome-pixmap.

Thu Feb 26 18:07:40 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* gnome-about.c: Undefine _ when compiling to avoid clash with
	i18n definition.

1998-02-26 Arturo Espinosa  <arturo@nuclecu.unam.mx>

        * gnome-stock.[ch]: New tb_scores pixmap for the games.

        * gnome-about.c (gnome_about_new): Now uses a stock button for OK.
	
1998-02-25  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* gnome-app-helper.c (gnome_app_add_radio_toolbar_entries): Use
	the GnomePixmap widget.
	(gnome_app_do_toolbar_creation): Likewise.

1998-02-25  Raja R Harinath  <harinath@cs.umn.edu>

	* gnome-app.c (gnome_app_new): Use "" instead of NULL.  Friendler
	to systems where `strlen(NULL)' is broken.

1998-02-24  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* gnome-pixmap.c (gnome_pixmap_init): GnomePixmap is a GTK_BASIC
	widget.

1998-02-23  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* gnome-pixmap.c (load_file): New internal function that takes
	care of file loading and widget setup.
	(gnome_pixmap_load_file): Changed to use load_file() internally.
	(gnome_pixmap_load_file_at_size): New function to load an image
	file and resize it to the specified size.  For example, this is
	useful to have a single icon size for the panel and just specify
	the size one will use (full size for the launchers, half size for
	menu items, etc.).
	(gnome_pixmap_new_from_xpm_d): New function, creates pixmap from
	XPM data in memory.
	(gnome_pixmap_new_from_xpm_d_at_size): Likewise.
	(gnome_pixmap_load_xpm_d): Likewise.
	(gnome_pixmap_load_xpm_d_at_size): Likewise!
	(gnome_pixmap_new_from_rgb_d): New function, creates pixmap from
	RGB plus (optional) Alpha data in memory.
	(gnome_pixmap_new_from_rgb_d_at_size): Likewise.
	(gnome_pixmap_load_rgb_d): Likewise.
	(gnome_pixmap_load_rgb_d_at_size): Likewise, you know it!
	(finish_load): New misc. internal function that does all the boilerplate
	image loading finalization.
	(load_file): Modified to use finish_load().
	(load_xpm_d): New internal function.
	(load_rgb_d): Likewise.

	* gnome-app-helper.c (gnome_app_do_toolbar_creation): Use 
	gnome_pixmap_new_from_file() widget instead of
	gnome_create_pixmap_widget().  I did not replace the
	g_c_p_widget_d() call because GnomePixmap does not support
	creating pixmaps from xpm data yet.

	* gnome-pixmap.c:
	* gnome-pixmap.h: New GnomePixmap widget!  It was created to
	replace the ugly gnome_create_pixmap_*() functions.  Now you can
	simply do something like:

		GtkWidget *gpixmap;
		gpixmap = gnome_pixmap_new_from_file ("hello.jpg");
		gtk_container_add (container, gpixmap);
		gtk_widget_show (gpixmap);

	And that's it.  The GnomePixmap widget takes care of all the
	visuals/colormaps/other_icky_X_stuff.

	GnomePixmap uses gdk_imlib for its work, so now gdk_imlib is a
	required component of Gnome.  Please install it if you have not
	done it yet; it is a very cool thing to have.

	During the next hours, I will be converting most of Gnome to use
	the new GnomePixmap widget instead of the old
	gnome_creat_pixmap_*() functions.

	* gnome-init.c (gnome_init): Added gdk_imlib_init() to the GnomeUI
	initialization procedure.

1998-02-23  Carsten Schaar  <nhadcasc@fs-maphy.uni-hannover.de>

	* gnome-client.c (gnome_default_client_init): New function.
  	Creates a new client without connection to a session manager.
  	This client is called the 'default client'. (Not used yet)
	(default_client_connect): New callback function.  This callback is
 	registered to the connect signal of the default client and sets
 	the SM_CLIENT_ID property to the gdk client leader window.
	(default_client_disconnect): New callback function.  Removes
 	SM_CLIENT_ID property.
	(gnome_get_default_client): New function.

	* gnome-app-helper.h: Removed comma in pixmap_type.

1998-02-20  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* gnome-entry.c (entry_activated): Now the GnomeEntry pushes a
	history item if the entry field was activated (via return key, for
	example).  We do proper checks to see if it is not an empty string
	and such (in which case a history item does not need to be pushed).

	* gnome-entry.h: Added changed field.  This is set to true if the
	entry field has changed but it has not been put into the history
	list.  False otherwise.

	* Gnome-entry.c: First usable version of the GnomeEntry widget.

	* gnome-startup.c: 
	* gnome-client.c: Added #include <string.h>

	* libgnomeui.h: Added gnome-entry.h to the includes list.

	* Makefile.am: Added gnome-entry.{c,h}

	* gnome-entry.c:
	* gnome-entry.h: New GnomeËntry widget -- entry field with
	automagic history saving.

	* ted_demo.c (main): Added app_id "ted_demo".

	* stock_demo.c (main): Added app_id "stock_demo".

	* gnome-init.c (gnome_init): Added app_id parameter to this
	function.  Changes to the rest of Gnome are in progress.

1998-02-19  Carsten Schaar <nhadcasc@fs-maphy.uni-hannover.de>

	* gnome-session.c: Removed. Was replaced by gnome-client.

	* gnome-session.h: same as above.

Wed Feb 18 13:52:00 PST 1998  Christoph Toshok  <toshok@hungry.com>
	* gnome-app-helper.c (gnome_app_do_menu_creation): If any items in
	a menu have GNOME_APP_PIXMAP_STOCK, use gnome_stock_menu_item for
	all of them, so the left side of the labels line up.
	(gnome_app_do_toolbar_creation): Use gnome_stock_pixmap_widget_new
	to create the toolbar button.
	
Wed Feb 18 17:03:13 KST 1998  Changwoo Ryu  <cwryu@adam.kaist.ac.kr>

	* gnome-about.c (gnome_destroy_about): Fixed refcounting.
	(gnome_fill_info, gnome_about_new): Fixed I18N problem.  (but a
 	dirty hack, it uses ONLY the fonts from gtkrc.).
	* gtkrc: Moved GnomeAbout styles to here.

1998-02-16  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* gnome-init.c (gnome_init): At last!  The horribly broken
	gnome_colors goes to hell now that we have imlib and the
	GdkColorContext :-)

	* libgnomeui.h: Removed gnome-colors include.

Tue Feb 17 00:16:49 KST 1998  Changwoo Ryu  <cwryu@adam.kaist.ac.kr>

	* gnome-messagebox.c (gnome_messagebox_button_clicked): Fixed
	buttonnumber counting.

	* gnome-scores.[ch]: Fixed i18n problem.  All color/font settings
 	are in gtkrc.
	(gnome_scores_set_logo_label_title): New function
	(gnome_scores_set_current_player): New function.
	* gnome-scores.c (gnome_scores_display): Use the above new
	functions. 

	* gtkrc: New file, the global gtk+ rc file of GNOME.
	* Makefile.am: Added gtkrc. 

1998-02-17  Eckehard Berns <eb@berns.prima.de>

	* gnome-stock.[ch]: added width/height fields to the
	GnomeStock...Entry structs to make sure a size_request gets the
	correct values.

Tue Feb 17 00:16:49 KST 1998  Changwoo Ryu  <cwryu@adam.kaist.ac.kr>


	* gnome-scores.c (gnome_scores_set_color): gtk_style_unref() new
	GtkStyle after gtk_widget_set_style.
	(gnome_scores_set_logo_label): Likewise.
	* gnome-about.c (gnome_about_new): Likewise.
	* gnome-font-selector.c (text_resize_text_widget): Likewise.


Mon Feb 16 11:53:14 KST 1998  Changwoo Ryu  <cwryu@adam.kaist.ac.kr>

	* gnome-client.h: Include <gtk/gtkobject.h>.

Sun Feb 15 21:22:33 1998  Tom Tromey  <tromey@cygnus.com>

	* libgnomeui.h: Include gnome-startup.h.
	* Makefile.am (libgnomeui_la_SOURCES): Include gnome-startup.c.
	(libgnomeuiinclude_HEADERS): Include gnome-startup.h.
	* gnome-startup.c: New file.
	* gnome-startup.h: New file.

	* gnome-client.c (gnome_client_init): Initialize previous_id.
	(gnome_real_client_destroy): Free previous_id if required.
	(gnome_client_new_without_connection): Set previous_id.
	(gnome_client_get_previous_id): New function.
	* gnome-client.h (struct _GnomeClient): Added previous_id member.
	(gnome_client_get_previous_id): Declare.

	* gnome-client.h: Corrected comment.

Sat Feb 14 17:15:18 1998  Tom Tromey  <tromey@cygnus.com>

	* gnome-scores.h (test): Removed declaration.

	* gnome-client.h: Removed RCS "Id" line.

1998-02-15  Carsten Schaar  <nhadcasc@fs-maphy.uni-hannover.de>

	* gnome-client.h: Two arguments were named 'id'.  This broke
	the objectiv-c interface, so I named them 'client_id' and 
	'user_id'.

1998-02-14  Christoph Toshok <toshok@hungry.com>
	* gnome-app-helper.c (gnome_app_create_menus_with_data): new
	function, to handle the (common) case of creating an entire menu
	system with the same callback data.
	(gnome_app_create_toolbar_with_data): analogous addition for
	toolbars.
	(gnome_app_do_menu_create): add data parameter, which is passed in
	by both gnome_app_create_menus_with_dat and
	gnome_app_create_menus, and which is passed on to
	gtk_signal_connect.  Also, add handling for new menuinfo type,
	GNOME_APP_MENU_SEPARATOR.
	(gnome_app_do_toolbar_create): analogous change for toolbars.
	* gnome-app-helper.h: wrap with BEGIN_GNOME_DECLS/END_GNOME_DECLS
	and add GNOME_APP_MENU_HELP enum.
	
1998-02-14  Carsten Schaar  <nhadcasc@fs-maphy.uni-hannover.de>

	* libgnomeui.h: includes the new session management
	support header file 'gnome-client.h' instead of the old one
	'gnome-session.h'

	* Makefile.am (libgnomeui_la_SOURCES): replaced 'gnome-session.c'
	with 'gnome-client.c'
	(libgnomeuiinclude_HEADERS): replaced 'gnome-session.h' with
	'gnome-client.h'
	(ted_demo_LDADD): added '$(INTLLIBS)'
	(stock_demo_LDADD): added '$(INTLLIBS)'

	* gnome-client.h: new file

	* gnome-client.c: new file

1998-02-13  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* gnome-about.c (gnome_fill_info): Made gdk_color_alloc() use the
	widget default colormap instead of the system colormap.  This is
	actually not the right way to do it; the about box should do all
	color allocation via a GdkColorContext.  The cc structure should
	reside in the GnomeAboutClass so that all about boxes can share it.

	* gnome-stock.c (gnome_stock_pixmap_widget_state_changed): Added
	gtk_widget_ref() when a new pixmap is created, because later they
	may get gtk_container_remove()d.
	(gnome_stock_pixmap_widget_size_request): Bad hack: if the pixmap
	window is NULL, we return a default size.  The gnome-stock
	architecture has to be rewritten, I think.  Please see my
	forthcoming post to gnome-list for a proposal on how to do this.

	* gnome-app.c: indentation fixes.

	* gnome-stock.c (build_hash_key): Made routine use g_copy_strings().

Fri Feb 13 19:03:21 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* gtk-ted.c (gtk_ted_parse_pos): Initialize flags to zero before
	doing the parsing.

Fri Feb 13 18:23:02 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* gnome-messagebox.c: Message boxes now take a variable number of
	arguments instead of having 3 options at most. 

Fri Feb 13 18:09:46 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* gtk-ted.c (gtk_ted_update_position): More refcouting joy.

Fri Feb 13 11:45:12 1998  Nuno Ferreira <nmrf@rnl.ist.utl.pt>

	* gnome-app.c (gnome_app_configure_positions): use app->toolbar
	when dealing with the toolbar, not app->menubar.

Wed Feb 11 15:06:05 1998  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* gtk-ted.c (gtk_ted_widget_drop
	gtk_ted_prepare_editable_widget): refcouting fixes

